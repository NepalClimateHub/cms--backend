
FROM node:24.2.0-bookworm-slim 
WORKDIR /usr/src/app
RUN npm install -g pnpm
COPY package.json  ./
RUN pnpm install
COPY . .
RUN pnpm dlx prisma generate
RUN pnpm run build
RUN pnpm prune --prod

ARG APP_ENV=production
CMD ["pnpm", "run", "prod"]
